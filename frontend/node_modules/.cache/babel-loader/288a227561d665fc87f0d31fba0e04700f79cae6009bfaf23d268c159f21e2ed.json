{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\\\u0412\\u0410\\u0436\\u043D\\u043E\\u0435\\\\cursor_project\\\\frontend\\\\src\\\\components\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport LineChartCard from './LineChartCard';\n\n/**\r\n * Dashboard component with full light / dark‑mode support.\r\n * Tailwind's `dark:` variants are added everywhere a color appears.\r\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Dashboard({\n  setIsAuthenticated\n}) {\n  _s();\n  // ────────────────────────────────────────────────────────────────────────────\n  // STATE\n  // ────────────────────────────────────────────────────────────────────────────\n  const [prediction, setPrediction] = useState(null);\n  const [timestamp, setTimestamp] = useState(null);\n  const [predictionHistory, setPredictionHistory] = useState([]);\n  const [filteredHistory, setFilteredHistory] = useState([]);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const [searchDate, setSearchDate] = useState('');\n  const [darkMode, setDarkMode] = useState(false);\n  const navigate = useNavigate();\n\n  // colour of the live value (green / red / yellow)\n  const [predictionColor, setPredictionColor] = useState('text-indigo-600');\n  const [prevPrediction, setPrevPrediction] = useState(() => {\n    const saved = localStorage.getItem('prevPrediction');\n    return saved ? parseFloat(saved) : null;\n  });\n\n  // ────────────────────────────────────────────────────────────────────────────\n  // EFFECTS – fetch data\n  // ────────────────────────────────────────────────────────────────────────────\n  const fetchHistory = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const {\n        data\n      } = await axios.get('http://localhost:8000/prediction/history', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setPredictionHistory(data.history);\n      setFilteredHistory(data.history);\n    } catch (err) {\n      console.error('Failed to fetch history:', err);\n    }\n  };\n  const fetchPrediction = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const {\n        data\n      } = await axios.get('http://localhost:8000/prediction', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (data.status === 'ready') {\n        const newPrediction = data.prediction;\n        if (prevPrediction !== null) {\n          const diff = newPrediction - prevPrediction;\n          if (diff > 0.00001) setPredictionColor('text-green-500');else if (diff < -0.00001) setPredictionColor('text-red-500');else setPredictionColor('text-yellow-500');\n        }\n        setPrevPrediction(newPrediction);\n        localStorage.setItem('prevPrediction', newPrediction);\n        setPrediction(newPrediction);\n        setTimestamp(data.timestamp);\n      }\n      setError(null);\n    } catch (err) {\n      var _err$response;\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n        setIsAuthenticated(false);\n        navigate('/login');\n      } else {\n        setError('Failed to fetch prediction');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // initial load + polling every 10s\n  useEffect(() => {\n    (async () => {\n      await fetchHistory();\n      await fetchPrediction();\n    })();\n    const interval = setInterval(fetchPrediction, 10000);\n    return () => clearInterval(interval);\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // ────────────────────────────────────────────────────────────────────────────\n  // THEME: persist & toggle\n  // ────────────────────────────────────────────────────────────────────────────\n  useEffect(() => {\n    const stored = localStorage.getItem('theme');\n    if (stored === 'dark') setDarkMode(true);\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('theme', darkMode ? 'dark' : 'light');\n    document.documentElement.classList.toggle('dark', darkMode);\n  }, [darkMode]);\n\n  // ────────────────────────────────────────────────────────────────────────────\n  // HELPERS\n  // ────────────────────────────────────────────────────────────────────────────\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('prevPrediction');\n    setIsAuthenticated(false);\n    navigate('/login');\n  };\n\n  // ────────────────────────────────────────────────────────────────────────────\n  // HELPERS\n  // ────────────────────────────────────────────────────────────────────────────\n  const calcAverageSince = (now, days) => {\n    const since = new Date(now);\n    since.setDate(now.getDate() - days);\n    const recent = predictionHistory.filter(p => new Date(p.timestamp) >= since);\n    if (!recent.length) return null;\n    return recent.reduce((acc, p) => acc + p.prediction, 0) / recent.length;\n  };\n  const now = new Date();\n  const todayAvg = calcAverageSince(now, 1);\n  const weekAvg = calcAverageSince(now, 7);\n  const monthAvg = calcAverageSince(now, 30);\n\n  // chart data (kept for possible future use)\n  const chartData = [...filteredHistory].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp)).map(p => ({\n    time: new Date(p.timestamp).toLocaleTimeString(),\n    value: p.prediction\n  }));\n  const diff = prevPrediction !== null ? +(prediction - prevPrediction).toFixed(4) : 0;\n  const diffColor = diff > 0 ? 'text-green-500' : diff < 0 ? 'text-red-500' : 'text-gray-400';\n  const diffIcon = diff > 0 ? '🔺' : diff < 0 ? '🔻' : '⭘';\n\n  // filter helpers -----------------------------------------------------------\n  const applyFilter = type => {\n    setFilter(type);\n    const now = new Date();\n    let filtered;\n    if (type === 'today') {\n      filtered = predictionHistory.filter(item => new Date(item.timestamp).toDateString() === now.toDateString());\n    } else if (type === '7days') {\n      const sevenDaysAgo = new Date(now);\n      sevenDaysAgo.setDate(now.getDate() - 7);\n      filtered = predictionHistory.filter(item => new Date(item.timestamp) >= sevenDaysAgo);\n    } else {\n      filtered = predictionHistory;\n    }\n    setFilteredHistory(filtered);\n  };\n  const handleSearchDate = e => {\n    const selected = e.target.value;\n    setSearchDate(selected);\n    if (!selected) return applyFilter(filter);\n    const filtered = predictionHistory.filter(item => new Date(item.timestamp).toISOString().split('T')[0] === selected);\n    setFilteredHistory(filtered);\n  };\n\n  // copy & csv helpers -------------------------------------------------------\n  const handleCopyHistory = () => {\n    const text = filteredHistory.map(p => `${new Date(p.timestamp).toLocaleString()} - ${p.prediction.toFixed(4)}`).join('\\n');\n    navigator.clipboard.writeText(text).then(() => alert('History copied!')).catch(() => alert('Copy failed'));\n  };\n  const handleDownloadCSV = () => {\n    const csv = `Timestamp,Prediction\\n${filteredHistory.map(p => `\"${new Date(p.timestamp).toLocaleString('ru-RU').replace(',', '')}\",${p.prediction.toFixed(4)}`).join('\\n')}`;\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(new Blob([csv], {\n      type: 'text/csv'\n    }));\n    link.download = 'prediction_history.csv';\n    link.click();\n  };\n  const buildSvgPath = (data, w, h, pad = 40) => {\n    if (!data.length) return {\n      path: '',\n      points: []\n    };\n    const xs = data.map((_, i) => pad + (w - 2 * pad) * i / (data.length - 1 || 1));\n    const values = data.map(d => d.value);\n    const minY = Math.min(...values);\n    const maxY = Math.max(...values);\n    const ys = values.map(v => pad + (h - 2 * pad) * (1 - (v - minY) / (maxY - minY || 1)));\n    const points = xs.map((x, i) => [x, ys[i]]);\n    const path = points.map(([x, y], i) => `${i === 0 ? 'M' : 'L'}${x.toFixed(1)},${y.toFixed(1)}`).join(' ');\n    return {\n      path,\n      points\n    };\n  };\n  const catmullRom2bezier = points => {\n    // возвращает строку «C … C …» для вставки в path\n    if (points.length < 2) return '';\n    const d = [];\n    for (let i = 0; i < points.length - 1; i++) {\n      const p0 = points[i - 1] || points[i];\n      const p1 = points[i];\n      const p2 = points[i + 1];\n      const p3 = points[i + 2] || p2;\n      const cp1x = p1[0] + (p2[0] - p0[0]) / 6;\n      const cp1y = p1[1] + (p2[1] - p0[1]) / 6;\n      const cp2x = p2[0] - (p3[0] - p1[0]) / 6;\n      const cp2y = p2[1] - (p3[1] - p1[1]) / 6;\n      d.push(`C${cp1x.toFixed(1)},${cp1y.toFixed(1)} ` + `${cp2x.toFixed(1)},${cp2y.toFixed(1)} ` + `${p2[0].toFixed(1)},${p2[1].toFixed(1)}`);\n    }\n    return d.join(' ');\n  };\n\n  // ────────────────────────────────────────────────────────────────────────────\n  // RENDER\n  // ────────────────────────────────────────────────────────────────────────────\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"bg-white dark:bg-gray-800 shadow-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between h-16 items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl sm:text-2xl font-bold\",\n            children: \"ML Prediction Service\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setDarkMode(!darkMode),\n              className: \"px-3 py-1 text-sm rounded-md bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 transition\",\n              children: darkMode ? '☀️ Light' : '🌙 Dark'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleLogout,\n              className: \"px-4 py-1 text-sm rounded-md text-white bg-red-600 hover:bg-red-700 transition\",\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8 space-y-6\",\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-100 dark:bg-red-700/30 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 px-4 py-3 rounded\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8 flex flex-col items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-6 text-gray-900 dark:text-gray-100\",\n            children: \"Current Prediction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 11\n          }, this), prediction !== null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-5xl font-bold mb-1 ${predictionColor}`,\n              children: prediction.toFixed(4)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-sm font-medium ${diffColor}`,\n              children: [diffIcon, ' ', diff === 0 ? '0' : Math.abs(diff).toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mt-1 text-xs text-gray-600 dark:text-gray-400\",\n              children: [\"Last updated: \", timestamp ? new Date(timestamp).toLocaleString() : 'N/A']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg text-gray-600 dark:text-gray-400\",\n            children: isLoading ? 'Loading…' : 'No data'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-6 text-gray-900 dark:text-gray-100\",\n            children: \"Averages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-3 text-center gap-4\",\n            children: [{\n              label: 'Today',\n              value: todayAvg\n            }, {\n              label: 'Last 7 Days',\n              value: weekAvg\n            }, {\n              label: 'Last 30 Days',\n              value: monthAvg\n            }].map(({\n              label,\n              value\n            }) => /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500 dark:text-gray-400 mb-1\",\n                children: label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-2xl font-bold text-indigo-600\",\n                children: value !== null ? value.toFixed(4) : '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 19\n              }, this)]\n            }, label, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100\",\n          children: \"Prediction History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap items-center gap-3 mb-4\",\n          children: [[{\n            id: 'today',\n            label: 'Today'\n          }, {\n            id: '7days',\n            label: 'Last 7 Days'\n          }, {\n            id: 'all',\n            label: 'All'\n          }].map(({\n            id,\n            label\n          }) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => applyFilter(id),\n            className: \"px-3 py-1 text-sm rounded bg-blue-100 dark:bg-blue-800 text-blue-900 dark:text-blue-100 hover:bg-blue-200 dark:hover:bg-blue-700\",\n            children: label\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: searchDate,\n            onChange: handleSearchDate,\n            className: \"ml-auto p-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCopyHistory,\n            className: \"px-3 py-1 text-sm rounded bg-green-500 hover:bg-green-600 text-white\",\n            children: \"Copy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDownloadCSV,\n            className: \"px-3 py-1 text-sm rounded bg-blue-500 hover:bg-blue-600 text-white\",\n            children: \"Download CSV\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-y-auto max-h-[400px] rounded-md\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"w-full text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-200 dark:bg-gray-700 sticky top-0\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left font-medium\",\n                  children: \"Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left font-medium\",\n                  children: \"Value\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: filteredHistory.map((pred, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: idx % 2 === 0 ? 'bg-white dark:bg-gray-900' : 'bg-gray-50 dark:bg-gray-800',\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-gray-700 dark:text-gray-300 whitespace-nowrap\",\n                  children: new Date(pred.timestamp).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 font-semibold text-gray-900 dark:text-gray-100 whitespace-nowrap\",\n                  children: pred.prediction.toFixed(4)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 21\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LineChartCard, {\n        data: chartData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"JtdQQSS3mUbCAfxsjU4ZtFSUBSc=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","LineChartCard","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","setIsAuthenticated","_s","prediction","setPrediction","timestamp","setTimestamp","predictionHistory","setPredictionHistory","filteredHistory","setFilteredHistory","error","setError","isLoading","setIsLoading","filter","setFilter","searchDate","setSearchDate","darkMode","setDarkMode","navigate","predictionColor","setPredictionColor","prevPrediction","setPrevPrediction","saved","localStorage","getItem","parseFloat","fetchHistory","token","data","get","headers","Authorization","history","err","console","fetchPrediction","status","newPrediction","diff","setItem","_err$response","response","interval","setInterval","clearInterval","stored","document","documentElement","classList","toggle","handleLogout","removeItem","calcAverageSince","now","days","since","Date","setDate","getDate","recent","p","length","reduce","acc","todayAvg","weekAvg","monthAvg","chartData","sort","a","b","map","time","toLocaleTimeString","value","toFixed","diffColor","diffIcon","applyFilter","type","filtered","item","toDateString","sevenDaysAgo","handleSearchDate","e","selected","target","toISOString","split","handleCopyHistory","text","toLocaleString","join","navigator","clipboard","writeText","then","alert","catch","handleDownloadCSV","csv","replace","link","createElement","href","URL","createObjectURL","Blob","download","click","buildSvgPath","w","h","pad","path","points","xs","_","i","values","d","minY","Math","min","maxY","max","ys","v","x","y","catmullRom2bezier","p0","p1","p2","p3","cp1x","cp1y","cp2x","cp2y","push","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","abs","label","id","onChange","pred","idx","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/ВАжное/cursor_project/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport LineChartCard from './LineChartCard';\r\n\r\n/**\r\n * Dashboard component with full light / dark‑mode support.\r\n * Tailwind's `dark:` variants are added everywhere a color appears.\r\n */\r\nfunction Dashboard({ setIsAuthenticated }) {\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  // STATE\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  const [prediction, setPrediction] = useState(null);\r\n  const [timestamp, setTimestamp] = useState(null);\r\n  const [predictionHistory, setPredictionHistory] = useState([]);\r\n  const [filteredHistory, setFilteredHistory] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all');\r\n  const [searchDate, setSearchDate] = useState('');\r\n  const [darkMode, setDarkMode] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // colour of the live value (green / red / yellow)\r\n  const [predictionColor, setPredictionColor] = useState('text-indigo-600');\r\n  const [prevPrediction, setPrevPrediction] = useState(() => {\r\n    const saved = localStorage.getItem('prevPrediction');\r\n    return saved ? parseFloat(saved) : null;\r\n  });\r\n\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  // EFFECTS – fetch data\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  const fetchHistory = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const { data } = await axios.get('http://localhost:8000/prediction/history', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setPredictionHistory(data.history);\r\n      setFilteredHistory(data.history);\r\n    } catch (err) {\r\n      console.error('Failed to fetch history:', err);\r\n    }\r\n  };\r\n\r\n  const fetchPrediction = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const { data } = await axios.get('http://localhost:8000/prediction', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (data.status === 'ready') {\r\n        const newPrediction = data.prediction;\r\n        if (prevPrediction !== null) {\r\n          const diff = newPrediction - prevPrediction;\r\n          if (diff > 0.00001) setPredictionColor('text-green-500');\r\n          else if (diff < -0.00001) setPredictionColor('text-red-500');\r\n          else setPredictionColor('text-yellow-500');\r\n        }\r\n        setPrevPrediction(newPrediction);\r\n        localStorage.setItem('prevPrediction', newPrediction);\r\n        setPrediction(newPrediction);\r\n        setTimestamp(data.timestamp);\r\n      }\r\n      setError(null);\r\n    } catch (err) {\r\n      if (err.response?.status === 401) {\r\n        setIsAuthenticated(false);\r\n        navigate('/login');\r\n      } else {\r\n        setError('Failed to fetch prediction');\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // initial load + polling every 10s\r\n  useEffect(() => {\r\n    (async () => {\r\n      await fetchHistory();\r\n      await fetchPrediction();\r\n    })();\r\n    const interval = setInterval(fetchPrediction, 10_000);\r\n    return () => clearInterval(interval);\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  // THEME: persist & toggle\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem('theme');\r\n    if (stored === 'dark') setDarkMode(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('theme', darkMode ? 'dark' : 'light');\r\n    document.documentElement.classList.toggle('dark', darkMode);\r\n  }, [darkMode]);\r\n\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  // HELPERS\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('prevPrediction');\r\n    setIsAuthenticated(false);\r\n    navigate('/login');\r\n  };\r\n\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  // HELPERS\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  const calcAverageSince = (now, days) => {\r\n    const since = new Date(now);\r\n    since.setDate(now.getDate() - days);\r\n    const recent = predictionHistory.filter((p) => new Date(p.timestamp) >= since);\r\n    if (!recent.length) return null;\r\n    return recent.reduce((acc, p) => acc + p.prediction, 0) / recent.length;\r\n  };\r\n\r\n  const now = new Date();\r\n  const todayAvg = calcAverageSince(now, 1);\r\n  const weekAvg = calcAverageSince(now, 7);\r\n  const monthAvg = calcAverageSince(now, 30);\r\n\r\n  // chart data (kept for possible future use)\r\n  const chartData = [...filteredHistory]\r\n    .sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp))\r\n    .map((p) => ({ time: new Date(p.timestamp).toLocaleTimeString(), value: p.prediction }));\r\n\r\n\r\n\r\n  const diff = prevPrediction !== null ? +(prediction - prevPrediction).toFixed(4) : 0;\r\n  const diffColor = diff > 0 ? 'text-green-500' : diff < 0 ? 'text-red-500' : 'text-gray-400';\r\n  const diffIcon = diff > 0 ? '🔺' : diff < 0 ? '🔻' : '⭘';\r\n\r\n  // filter helpers -----------------------------------------------------------\r\n  const applyFilter = (type) => {\r\n    setFilter(type);\r\n    const now = new Date();\r\n    let filtered;\r\n    if (type === 'today') {\r\n      filtered = predictionHistory.filter((item) => new Date(item.timestamp).toDateString() === now.toDateString());\r\n    } else if (type === '7days') {\r\n      const sevenDaysAgo = new Date(now);\r\n      sevenDaysAgo.setDate(now.getDate() - 7);\r\n      filtered = predictionHistory.filter((item) => new Date(item.timestamp) >= sevenDaysAgo);\r\n    } else {\r\n      filtered = predictionHistory;\r\n    }\r\n    setFilteredHistory(filtered);\r\n  };\r\n\r\n  const handleSearchDate = (e) => {\r\n    const selected = e.target.value;\r\n    setSearchDate(selected);\r\n    if (!selected) return applyFilter(filter);\r\n    const filtered = predictionHistory.filter((item) => new Date(item.timestamp).toISOString().split('T')[0] === selected);\r\n    setFilteredHistory(filtered);\r\n  };\r\n\r\n  // copy & csv helpers -------------------------------------------------------\r\n  const handleCopyHistory = () => {\r\n    const text = filteredHistory.map((p) => `${new Date(p.timestamp).toLocaleString()} - ${p.prediction.toFixed(4)}`).join('\\n');\r\n    navigator.clipboard.writeText(text).then(() => alert('History copied!')).catch(() => alert('Copy failed'));\r\n  };\r\n\r\n  const handleDownloadCSV = () => {\r\n    const csv = `Timestamp,Prediction\\n${filteredHistory\r\n      .map((p) => `\"${new Date(p.timestamp).toLocaleString('ru-RU').replace(',', '')}\",${p.prediction.toFixed(4)}`)\r\n      .join('\\n')}`;\r\n    const link = document.createElement('a');\r\n    link.href = URL.createObjectURL(new Blob([csv], { type: 'text/csv' }));\r\n    link.download = 'prediction_history.csv';\r\n    link.click();\r\n  };\r\n\r\n  const buildSvgPath = (data, w, h, pad = 40) => {\r\n  if (!data.length) return { path: '', points: [] };\r\n\r\n  const xs = data.map((_, i) =>\r\n    pad + ((w - 2 * pad) * i) / (data.length - 1 || 1)\r\n  );\r\n  const values = data.map((d) => d.value);\r\n  const minY = Math.min(...values);\r\n  const maxY = Math.max(...values);\r\n  const ys = values.map(\r\n    (v) => pad + ((h - 2 * pad) * (1 - (v - minY) / (maxY - minY || 1)))\r\n  );\r\n\r\n  const points = xs.map((x, i) => [x, ys[i]]);\r\n  const path = points\r\n    .map(([x, y], i) => `${i === 0 ? 'M' : 'L'}${x.toFixed(1)},${y.toFixed(1)}`)\r\n    .join(' ');\r\n\r\n  return { path, points };\r\n};\r\n\r\n  const catmullRom2bezier = (points) => {\r\n  // возвращает строку «C … C …» для вставки в path\r\n  if (points.length < 2) return '';\r\n  const d = [];\r\n  for (let i = 0; i < points.length - 1; i++) {\r\n    const p0 = points[i - 1] || points[i];\r\n    const p1 = points[i];\r\n    const p2 = points[i + 1];\r\n    const p3 = points[i + 2] || p2;\r\n    const cp1x = p1[0] + (p2[0] - p0[0]) / 6;\r\n    const cp1y = p1[1] + (p2[1] - p0[1]) / 6;\r\n    const cp2x = p2[0] - (p3[0] - p1[0]) / 6;\r\n    const cp2y = p2[1] - (p3[1] - p1[1]) / 6;\r\n    d.push(\r\n      `C${cp1x.toFixed(1)},${cp1y.toFixed(1)} ` +\r\n        `${cp2x.toFixed(1)},${cp2y.toFixed(1)} ` +\r\n        `${p2[0].toFixed(1)},${p2[1].toFixed(1)}`\r\n    );\r\n  }\r\n  return d.join(' ');\r\n};\r\n\r\n\r\n\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  // RENDER\r\n  // ────────────────────────────────────────────────────────────────────────────\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100\">\r\n      {/* ─── NAVBAR ───────────────────────────────────────────────────────────*/}\r\n      <nav className=\"bg-white dark:bg-gray-800 shadow-lg\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-between h-16 items-center\">\r\n            <h1 className=\"text-xl sm:text-2xl font-bold\">ML Prediction Service</h1>\r\n\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                onClick={() => setDarkMode(!darkMode)}\r\n                className=\"px-3 py-1 text-sm rounded-md bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 transition\"\r\n              >\r\n                {darkMode ? '☀️ Light' : '🌙 Dark'}\r\n              </button>\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"px-4 py-1 text-sm rounded-md text-white bg-red-600 hover:bg-red-700 transition\"\r\n              >\r\n                Logout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* ─── MAIN CONTENT ─────────────────────────────────────────────────────*/}\r\n      <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8 space-y-6\">\r\n        {/* error banner */}\r\n        {error && (\r\n          <div className=\"bg-red-100 dark:bg-red-700/30 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 px-4 py-3 rounded\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {/* cards grid */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* Current prediction */}\r\n          <section className=\"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8 flex flex-col items-center\">\r\n          <h2 className=\"text-xl font-semibold mb-6 text-gray-900 dark:text-gray-100\">\r\n            Current Prediction\r\n          </h2>\r\n\r\n          {prediction !== null ? (\r\n            <>\r\n              {/* само значение */}\r\n              <p className={`text-5xl font-bold mb-1 ${predictionColor}`}>\r\n                {prediction.toFixed(4)}\r\n              </p>\r\n\r\n              {/* дельта */}\r\n              <p className={`text-sm font-medium ${diffColor}`}>\r\n                {diffIcon}{' '}\r\n                {diff === 0 ? '0' : Math.abs(diff).toFixed(4)}\r\n              </p>\r\n\r\n              <span className=\"mt-1 text-xs text-gray-600 dark:text-gray-400\">\r\n                Last updated: {timestamp ? new Date(timestamp).toLocaleString() : 'N/A'}\r\n              </span>\r\n            </>\r\n          ) : (\r\n            <p className=\"text-lg text-gray-600 dark:text-gray-400\">\r\n              {isLoading ? 'Loading…' : 'No data'}\r\n            </p>\r\n          )}\r\n        </section>\r\n\r\n          {/* Averages */}\r\n          <section className=\"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8\">\r\n            <h2 className=\"text-xl font-semibold mb-6 text-gray-900 dark:text-gray-100\">Averages</h2>\r\n            <div className=\"grid grid-cols-3 text-center gap-4\">\r\n              {[\r\n                { label: 'Today', value: todayAvg },\r\n                { label: 'Last 7 Days', value: weekAvg },\r\n                { label: 'Last 30 Days', value: monthAvg },\r\n              ].map(({ label, value }) => (\r\n                <div key={label}>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">{label}</p>\r\n                  <p className=\"text-2xl font-bold text-indigo-600\">{value !== null ? value.toFixed(4) : '—'}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/* History card */}\r\n        <section className=\"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8\">\r\n          <h2 className=\"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100\">Prediction History</h2>\r\n\r\n          {/* filters */}\r\n          <div className=\"flex flex-wrap items-center gap-3 mb-4\">\r\n            {[\r\n              { id: 'today', label: 'Today' },\r\n              { id: '7days', label: 'Last 7 Days' },\r\n              { id: 'all', label: 'All' },\r\n            ].map(({ id, label }) => (\r\n              <button\r\n                key={id}\r\n                onClick={() => applyFilter(id)}\r\n                className=\"px-3 py-1 text-sm rounded bg-blue-100 dark:bg-blue-800 text-blue-900 dark:text-blue-100 hover:bg-blue-200 dark:hover:bg-blue-700\"\r\n              >\r\n                {label}\r\n              </button>\r\n            ))}\r\n            <input\r\n              type=\"date\"\r\n              value={searchDate}\r\n              onChange={handleSearchDate}\r\n              className=\"ml-auto p-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded\"\r\n            />\r\n            <button\r\n              onClick={handleCopyHistory}\r\n              className=\"px-3 py-1 text-sm rounded bg-green-500 hover:bg-green-600 text-white\"\r\n            >\r\n              Copy\r\n            </button>\r\n            <button\r\n              onClick={handleDownloadCSV}\r\n              className=\"px-3 py-1 text-sm rounded bg-blue-500 hover:bg-blue-600 text-white\"\r\n            >\r\n              Download CSV\r\n            </button>\r\n          </div>\r\n\r\n          {/* table */}\r\n          <div className=\"overflow-y-auto max-h-[400px] rounded-md\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead className=\"bg-gray-200 dark:bg-gray-700 sticky top-0\">\r\n                <tr>\r\n                  <th className=\"px-4 py-2 text-left font-medium\">Time</th>\r\n                  <th className=\"px-4 py-2 text-left font-medium\">Value</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredHistory.map((pred, idx) => (\r\n                  <tr\r\n                    key={idx}\r\n                    className={idx % 2 === 0 ? 'bg-white dark:bg-gray-900' : 'bg-gray-50 dark:bg-gray-800'}\r\n                  >\r\n                    <td className=\"px-4 py-2 text-gray-700 dark:text-gray-300 whitespace-nowrap\">\r\n                      {new Date(pred.timestamp).toLocaleString()}\r\n                    </td>\r\n                    <td className=\"px-4 py-2 font-semibold text-gray-900 dark:text-gray-100 whitespace-nowrap\">\r\n                      {pred.prediction.toFixed(4)}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </section>\r\n\r\n        <LineChartCard data={chartData} />\r\n\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}